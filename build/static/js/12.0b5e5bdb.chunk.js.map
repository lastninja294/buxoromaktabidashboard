{"version":3,"sources":["pages/dashboard/courses/index.js"],"names":["Courses","mutateAsync","usePostData","mutateAsync1","handleSubmit","data","reset","newData","create","desc","JSON","stringify","imgUpload","FormData","append","imgUrl","then","a","fileUrl","catch","message","error","console","log","res","success","err","title","size","direction","type","initialValue","generate","schema","onSubmit","isLoading","routeForData","deleteKey"],"mappings":"gNAsDeA,UA9CC,WACd,IAAOC,EAAeC,YAAY,SAA3BD,YACaE,EAAgBD,YAAY,WAAzCD,YAEDG,EAAY,iDAAG,WAAOC,EAAMC,GAAK,mFAII,OAHnCC,EAAO,eAAOF,EAAKG,OAAO,KACxBC,KAAOC,KAAKC,UAAUJ,EAAQE,OAChCG,EAAY,IAAIC,UACZC,OAAO,OAAQT,EAAKU,OAAO,IAAI,SAEnCd,EAAYW,GACfI,MAAK,SAACC,GACLV,EAAQQ,OAAU,OAADE,QAAC,IAADA,OAAC,EAADA,EAAGC,OACtB,IACCC,OAAM,WACLZ,EAAQQ,OAAS,GACjBK,IAAQC,MAAM,wCAChB,IAAG,KAAD,EAE4B,OAAhCC,QAAQC,IAAI,UAAWhB,GAAS,SAE1BJ,EAAaI,GAChBS,MAAK,SAACQ,GACLJ,IAAQK,QAAQD,EAAIJ,SACpBd,GACF,IACCa,OAAM,SAACO,GAAG,OAAKJ,QAAQC,IAAIG,EAAI,IAAE,KAAD,sCACpC,gBAvBiB,wCAyBlB,OACE,qCACE,cAAC,IAAe,CAACC,MAAM,YACvB,eAAC,IAAK,CAACC,KAAM,SAAUC,UAAU,WAAU,UACzC,cAAC,IAAS,CACRC,KAAK,SACLC,aAAcC,YAAS,WAAW,GAClCC,OAAQD,YAAS,WAAW,GAC5BE,SAAU9B,EACV+B,WAAW,IAEb,cAAC,IAAY,CAACC,aAAc,UAAWC,UAAU,iBAIzD,C","file":"static/js/12.0b5e5bdb.chunk.js","sourcesContent":["import AppPageMetadata from '@crema/core/AppPageMetadata';\r\nimport React from 'react';\r\nimport {DynamicTable} from '../Components';\r\nimport {message, Space} from 'antd';\r\nimport ModalForm from '../Components/ModalForm';\r\nimport generate from '../Components/Table/generate';\r\nimport {usePostData} from 'hooks';\r\n\r\nconst Courses = () => {\r\n  const {mutateAsync} = usePostData('files');\r\n  const {mutateAsync: mutateAsync1} = usePostData('courses');\r\n\r\n  const handleSubmit = async (data, reset) => {\r\n    const newData = {...data.create[0]};\r\n    newData.desc = JSON.stringify(newData.desc);\r\n    const imgUpload = new FormData();\r\n    imgUpload.append('file', data.imgUrl[0]);\r\n\r\n    await mutateAsync(imgUpload)\r\n      .then((a) => {\r\n        newData.imgUrl = a?.fileUrl;\r\n      })\r\n      .catch(() => {\r\n        newData.imgUrl = '';\r\n        message.error(\"Rasm yuklanmadi qayta urinib ko'ring!\");\r\n      });\r\n\r\n    console.log('newwwww', newData);\r\n\r\n    await mutateAsync1(newData)\r\n      .then((res) => {\r\n        message.success(res.message);\r\n        reset();\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <AppPageMetadata title='Courses' />\r\n      <Space size={'middle'} direction='vertical'>\r\n        <ModalForm\r\n          type='create'\r\n          initialValue={generate('courses')[0]}\r\n          schema={generate('courses')[1]}\r\n          onSubmit={handleSubmit}\r\n          isLoading={false}\r\n        />\r\n        <DynamicTable routeForData={'courses'} deleteKey='courses' />\r\n      </Space>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Courses;\r\n"],"sourceRoot":""}