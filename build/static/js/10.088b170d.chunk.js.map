{"version":3,"sources":["pages/dashboard/Comments/index.js"],"names":["Comments","mutateAsync","usePostData","mutateAsync1","handleSubmit","data","reset","imgUpload","FormData","append","imgUrl","url","then","a","fileUrl","catch","uploadData","desc","create","name","console","log","res","message","success","error","title","size","direction","type","initialValue","generate","schema","onSubmit","isLoading","routeForData","deleteKey"],"mappings":"yMAsDeA,UA9CE,WACf,IAAOC,EAAeC,YAAY,SAA3BD,YACaE,EAAgBD,YAAY,YAAzCD,YACDG,EAAY,iDAAG,WAAOC,EAAMC,GAAK,qFAIzB,OAHNC,EAAY,IAAIC,UACZC,OAAO,OAAQJ,EAAKK,OAAO,IAEjCC,EAAM,GAAG,EAAD,OACNV,EAAYM,GACfK,MAAK,SAACC,GACLF,EAAO,OAADE,QAAC,IAADA,OAAC,EAADA,EAAGC,OACX,IACCC,OAAM,WACLJ,EAAM,EACR,IAAG,KAAD,EAMoB,OALlBK,EAAa,CACjBN,OAAQC,EACRM,KAAMZ,EAAKa,OAAO,GAAGD,KACrBE,KAAMd,EAAKa,OAAO,GAAGC,MAEvBC,QAAQC,IAAIL,GAAY,SAClBb,EAAaa,GAChBJ,MAAK,SAACU,GACLC,IAAQC,QAAQF,EAAIC,SACpBjB,GACF,IACCS,OAAM,kBAAMQ,IAAQE,MAAM,iBAAiB,IAAE,KAAD,sCAChD,gBAxBiB,wCA0BlB,OACE,qCACE,cAAC,IAAe,CAACC,MAAM,aACvB,eAAC,IAAK,CAACC,KAAM,SAAUC,UAAU,WAAU,UACzC,cAAC,IAAS,CACRC,KAAK,SACLC,aAAcC,YAAS,YAAY,GACnCC,OAAQD,YAAS,YAAY,GAC7BE,SAAU7B,EACV8B,WAAW,IAEb,cAAC,IAAY,CAACC,aAAa,WAAWC,UAAU,kBAIxD,C","file":"static/js/10.088b170d.chunk.js","sourcesContent":["import AppPageMetadata from '@crema/core/AppPageMetadata';\r\nimport React from 'react';\r\nimport {DynamicTable} from '../Components';\r\nimport {message, Space} from 'antd';\r\nimport ModalForm from '../Components/ModalForm';\r\nimport generate from '../Components/Table/generate';\r\nimport {usePostData} from 'hooks';\r\n\r\nconst Comments = () => {\r\n  const {mutateAsync} = usePostData('files');\r\n  const {mutateAsync: mutateAsync1} = usePostData('comments');\r\n  const handleSubmit = async (data, reset) => {\r\n    const imgUpload = new FormData();\r\n    imgUpload.append('file', data.imgUrl[0]);\r\n\r\n    let url = '';\r\n    await mutateAsync(imgUpload)\r\n      .then((a) => {\r\n        url = a?.fileUrl;\r\n      })\r\n      .catch(() => {\r\n        url = '';\r\n      });\r\n    const uploadData = {\r\n      imgUrl: url,\r\n      desc: data.create[0].desc,\r\n      name: data.create[0].name,\r\n    };\r\n    console.log(uploadData);\r\n    await mutateAsync1(uploadData)\r\n      .then((res) => {\r\n        message.success(res.message);\r\n        reset();\r\n      })\r\n      .catch(() => message.error('Xatolik mavjud'));\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <AppPageMetadata title='comments' />\r\n      <Space size={'middle'} direction='vertical'>\r\n        <ModalForm\r\n          type='create'\r\n          initialValue={generate('comments')[0]}\r\n          schema={generate('comments')[1]}\r\n          onSubmit={handleSubmit}\r\n          isLoading={false}\r\n        />\r\n        <DynamicTable routeForData='comments' deleteKey='comments' />\r\n      </Space>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Comments;\r\n"],"sourceRoot":""}